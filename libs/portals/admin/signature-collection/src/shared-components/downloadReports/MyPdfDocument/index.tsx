import {
  Page,
  Text,
  Document,
  Image,
  View,
  Font,
  StyleSheet,
} from '@react-pdf/renderer'
import logo from './logo.png'
import { dark200 } from '@island.is/island-ui/theme'
import { SignatureCollectionAreaSummaryReport } from '@island.is/api/schema'
import format from 'date-fns/format'

const MyPdfDocument = ({
  report,
}: {
  report: SignatureCollectionAreaSummaryReport
}) => {
  return (
    <Document>
      {report?.lists?.length
        ? report.lists.map((list) => (
            <Page style={styles.body} key={list.listName}>
              <View>
                <Text style={styles.pageTitle}>{report.name}</Text>
                <View style={styles.dividerLineBox}>
                  <View style={styles.dividerLine} />
                </View>

                <Text style={styles.header}>Flokkur:</Text>
                <Text style={styles.text}>{list.candidateName}</Text>

                <Text style={styles.header}>Dagsetning:</Text>
                <Text style={styles.text}>
                  {format(new Date(), 'dd.MM.yyyy HH:mm')}
                </Text>

                <Text style={styles.header}>Listabókstafur:</Text>
                <Text style={styles.text}>{list.partyBallotLetter}</Text>

                <Text style={styles.header}>Rafræn meðmæli:</Text>
                <Text style={styles.text}>{list.nrOfDigitalSignatures}</Text>

                <Text style={styles.header}>Meðmæli af pappír:</Text>
                <Text style={styles.text}>{list.nrOfPaperSignatures}</Text>

                <Text style={styles.header}>
                  Samtals fjöldi gildra meðmæla:
                </Text>
                <Text style={styles.text}>{list.nrOfSignatures}</Text>
              </View>

              <Image src={logo} style={styles.logo} fixed />
            </Page>
          ))
        : report && (
            <Page style={styles.body}>
              <Text style={styles.pageTitle}>{report?.name}</Text>
              <View style={styles.dividerLineBox}>
                <View style={styles.dividerLine} />
              </View>
              <Text style={styles.header}>Engar upplýsingar til að birta</Text>
            </Page>
          )}
    </Document>
  )
}

export const styles = StyleSheet.create({
  body: {
    paddingVertical: 50,
    paddingHorizontal: 60,
    fontFamily: 'IBM Plex Sans',
    fontSize: 10,
  },
  pageTitle: {
    fontSize: 20,
  },
  dividerLineBox: {
    marginTop: 25,
    marginBottom: 10,
  },
  dividerLine: {
    borderTop: `1px solid ${dark200}`,
  },
  header: {
    fontSize: 14,
    marginTop: 25,
    fontWeight: 600,
    marginBottom: 5,
  },
  text: {
    fontSize: 12,
  },
  logo: {
    position: 'absolute',
    right: 60,
    bottom: 50,
    width: 50,
  },
})

Font.register({
  family: 'IBM Plex Sans',
  fonts: [
    {
      src: './assets/fonts/ibm-plex-sans-v7-latin-regular.ttf',
    },
    {
      src: './assets/fonts/ibm-plex-sans-v7-latin-600.ttf',
      fontWeight: 600,
    },
  ],
})

export default MyPdfDocument
