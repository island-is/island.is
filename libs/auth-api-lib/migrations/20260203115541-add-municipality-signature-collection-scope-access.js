'use strict'

module.exports = {
  async up(queryInterface) {
    await queryInterface.sequelize.query(`
      BEGIN;

      INSERT INTO api_scope_user_access (national_id, scope)
      SELECT national_id, '@admin.island.is/signature-collection:municipality'
      FROM (
        VALUES
          ('5701696109'),
          ('5901697579'),
          ('6901693129'),
          ('7001693759'),
          ('4702695669'),
          ('5302697609'),
          ('5602692429'),
          ('5801691559'),
          ('4707942169'),
          ('5505181200'),
          ('6702692649'),
          ('4101694449'),
          ('5106942289'),
          ('5106942019'),
          ('6908942469'),
          ('5201691729'),
          ('6306061950'),
          ('6002690709'),
          ('5106942449'),
          ('6202697009'),
          ('4807740279'),
          ('6801690719'),
          ('4407872589'),
          ('5708060410'),
          ('6302694589'),
          ('5106942369'),
          ('4301690419'),
          ('5405962639'),
          ('6504222520'),
          ('5405982829'),
          ('5506982349'),
          ('4101696229'),
          ('6205982089'),
          ('4101912029'),
          ('5807060880'),
          ('5801692019'),
          ('5101013830'),
          ('4203691749'),
          ('6401695599'),
          ('6402692279'),
          ('5503221100'),
          ('4706982099'),
          ('5501695339'),
          ('6602201350'),
          ('7102695569'),
          ('5106024120'),
          ('6006061310'),
          ('5906982109'),
          ('6401692309'),
          ('6401694849'),
          ('4612830399'),
          ('4706022440'),
          ('5206023050'),
          ('4806902069'),
          ('5406024410'),
          ('5901694639'),
          ('6505982029'),
          ('4203697009'),
          ('6902690159'),
          ('4301690339')
      ) AS input(national_id)
      WHERE EXISTS (
        SELECT 1 FROM api_scope_user u WHERE u.national_id = input.national_id
      )
      ON CONFLICT (national_id, scope) DO NOTHING;

      COMMIT;
    `)
  },

  async down(queryInterface) {
    await queryInterface.sequelize.query(`
      BEGIN;

      DELETE FROM api_scope_user_access
      WHERE scope = '@admin.island.is/signature-collection:municipality'
      AND national_id IN (
        '5701696109',
        '5901697579',
        '6901693129',
        '7001693759',
        '4702695669',
        '5302697609',
        '5602692429',
        '5801691559',
        '4707942169',
        '5505181200',
        '6702692649',
        '4101694449',
        '5106942289',
        '5106942019',
        '6908942469',
        '5201691729',
        '6306061950',
        '6002690709',
        '5106942449',
        '6202697009',
        '4807740279',
        '6801690719',
        '4407872589',
        '5708060410',
        '6302694589',
        '5106942369',
        '4301690419',
        '5405962639',
        '6504222520',
        '5405982829',
        '5506982349',
        '4101696229',
        '6205982089',
        '4101912029',
        '5807060880',
        '5801692019',
        '5101013830',
        '4203691749',
        '6401695599',
        '6402692279',
        '5503221100',
        '4706982099',
        '5501695339',
        '6602201350',
        '7102695569',
        '5106024120',
        '6006061310',
        '5906982109',
        '6401692309',
        '6401694849',
        '4612830399',
        '4706022440',
        '5206023050',
        '4806902069',
        '5406024410',
        '5901694639',
        '6505982029',
        '4203697009',
        '6902690159',
        '4301690339'
      );

      COMMIT;
    `)
  },
}
